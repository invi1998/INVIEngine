# 正向渲染

![image-20231110175357774](.\image-20231110175357774.png)

DirectX 12 正向渲染是一种基于GPU的渲染技术，用于实现高性能、高质量的三维图形渲染。正向渲染是一种基于物体的渲染方式，即通过光照等影响物体表面颜色的因素进行计算，最终将结果输出到屏幕上。

正向渲染主要包括以下几个步骤：

1. 准备场景

在正向渲染之前，需要准备好场景中所有物体的网格数据、纹理、材质等信息，并将其转换为GPU可以处理的格式（例如顶点缓冲区、索引缓冲区、纹理资源等），并上传到GPU内存中。

2. 准备着色器

着色器是GPU渲染管线中的核心部分，可以通过编写HLSL代码来实现各种不同的渲染效果。在正向渲染中，通常需要编写顶点着色器和像素着色器，其中顶点着色器主要用于将场景中的网格数据转换为GPU可处理的格式，而像素着色器则用于计算每个像素的颜色值。

3. 设置渲染状态

在正向渲染中，还需要设置一些渲染状态，例如深度测试、剔除模式、混合模式等，以便GPU可以对场景中的物体进行正确的渲染。这些状态可以通过设备上下文对象（ID3D12DeviceContext）中的相应方法进行设置。

4. 执行渲染命令

当准备好场景、着色器和渲染状态后，就可以执行渲染命令来开始绘制场景了。在 Direct3D 12 中，渲染命令主要通过命令列表（ID3D12CommandList）来完成，开发者需要将设备上下文对象产生的一系列绘制命令（如清空缓冲区、设置渲染目标、绘制网格、更新常量缓冲区等）添加到命令列表中，然后提交到GPU执行。

5. 显示渲染结果

当渲染命令执行完毕后，就可以将渲染结果显示到屏幕上了。在 Direct3D 12 中，可以使用交换链（Swap Chain）机制来实现渲染结果的显示。
