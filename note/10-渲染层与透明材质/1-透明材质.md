## D3D12_RENDER_TARGET_BLEND_DESC

D3D12_RENDER_TARGET_BLEND_DESC 是 Direct3D 12 API 中的一个结构体类型，用于描述在渲染管线中一帧图像的某个渲染目标上应用的混合操作。该结构体包含了使用 BlendState 的混合方式、混合因子等信息。

具体来说，D3D12_RENDER_TARGET_BLEND_DESC 结构体包含以下成员：

- BlendEnable：指示当前渲染目标是否开启混合。可以为 TRUE 或 FALSE。
- LogicOpEnable：指示是否启用逻辑运算。可以为 TRUE 或 FALSE（开启混合必须将该值关闭，因为他两是互斥的）。
- SrcBlend：指示源颜色和混合后颜色之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。
- DestBlend：指示目标颜色和混合后颜色之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。
- BlendOp：指示混合操作的类型（加法、减法或反向减法）。可以是 D3D12_BLEND_OP 枚举类型中的任意一个值。
- SrcBlendAlpha：指示源透明度和混合后透明度之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。
- DestBlendAlpha：指示目标透明度和混合后透明度之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。
- BlendOpAlpha：指示透明度混合操作的类型（加法、减法或反向减法）。可以是 D3D12_BLEND_OP 枚举类型中的任意一个值。
- LogicOp：指示逻辑运算的类型（与、或、异或等）。可以是 D3D12_LOGIC_OP 枚举类型中的任意一个值。
- RenderTargetWriteMask：指示需要写入当前渲染目标的哪些颜色通道。可以是 D3D12_COLOR_WRITE_ENABLE 枚举类型中的任意一个值的组合。

通过设置 D3D12_RENDER_TARGET_BLEND_DESC 结构体的各个成员，可以实现不同的混合效果，从而达到更好的图像渲染效果。在 DirectX 12 中，这个结构体经常和其他相关的接口一起使用，比如 ID3D12BlendState 接口中的 CreateBlendState() 方法，可用于创建混合状态对象。

其中各个结构体成员的枚举值说明如下：

- BlendEnable：表示当前渲染目标是否开启混合。可以为 TRUE 或 FALSE。

- LogicOpEnable：表示是否启用逻辑运算。可以为 TRUE 或 FALSE。

- SrcBlend：表示源颜色和混合后颜色之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。常见的枚举值包括：

  - D3D12_BLEND_ONE：将源颜色乘以 1。
  - D3D12_BLEND_SRC_ALPHA：将源颜色乘以源像素的 alpha 值。
  - D3D12_BLEND_DEST_COLOR：将源颜色乘以目标像素的颜色值。
  - D3D12_BLEND_BLEND_FACTOR：将源颜色乘以自定义的混合因子。

- DestBlend：表示目标颜色和混合后颜色之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。常用的枚举值与 SrcBlend 相同。

  - D3D12_BLEND_ZERO：将目标像素的颜色值设置为 0。
  - D3D12_BLEND_ONE：将目标像素的颜色值设置为 1。
  - D3D12_BLEND_SRC_COLOR：将目标像素的颜色值设置为源像素的颜色值。
  - D3D12_BLEND_INV_SRC_COLOR：将目标像素的颜色值设置为源像素的颜色值取反（即 1 - 源像素的颜色值）。
  - D3D12_BLEND_DEST_COLOR：将目标像素的颜色值设置为目标像素的颜色值。
  - D3D12_BLEND_INV_DEST_COLOR：将目标像素的颜色值设置为目标像素的颜色值取反（即 1 - 目标像素的颜色值）。
  - D3D12_BLEND_SRC_ALPHA：将目标像素的颜色值设置为源像素的透明度值。
  - D3D12_BLEND_INV_SRC_ALPHA：将目标像素的颜色值设置为源像素的透明度值取反（即 1 - 源像素的透明度值）。
  - D3D12_BLEND_DEST_ALPHA：将目标像素的颜色值设置为目标像素的透明度值。
  - D3D12_BLEND_INV_DEST_ALPHA：将目标像素的颜色值设置为目标像素的透明度值取反（即 1 - 目标像素的透明度值）。
  - D3D12_BLEND_BLEND_FACTOR：将目标像素的颜色值设置为自定义的混合因子（由 BlendFactor 成员指定）。

  需要注意的是，不同的 DestBlend 枚举值可以通过搭配不同的 SrcBlend 枚举值，实现多种不同的混合效果。例如，当 DestBlend 设置为 D3D12_BLEND_INV_SRC_COLOR 时，将 SrcBlend 设置为 D3D12_BLEND_SRC_COLOR，就可以实现反转源像素颜色的混合效果；而当 DestBlend 和 SrcBlend 都设置为 D3D12_BLEND_ONE 时，则会采用简单的加法混合方式，将两个像素的颜色值相加

- BlendOp：表示混合操作的类型（加法、减法或反向减法）。可以是 D3D12_BLEND_OP 枚举类型中的任意一个值。常见的枚举值包括：

  - D3D12_BLEND_OP_ADD：将源颜色和目标颜色相加。
  - D3D12_BLEND_OP_SUBTRACT：将源颜色减去目标颜色。
  - D3D12_BLEND_OP_REV_SUBTRACT：将目标颜色减去源颜色。

- SrcBlendAlpha：表示源透明度和混合后透明度之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。常见的枚举值与 SrcBlend 相同。

- DestBlendAlpha：表示目标透明度和混合后透明度之间的乘法方式。可以是 D3D12_BLEND 枚举类型中的任意一个值。常见的枚举值与 SrcBlend 相同。

- BlendOpAlpha：表示透明度混合操作的类型（加法、减法或反向减法）。可以是 D3D12_BLEND_OP 枚举类型中的任意一个值。常见的枚举值与 BlendOp 相同。

- LogicOp：表示逻辑运算的类型（与、或、异或等）。可以是 D3D12_LOGIC_OP 枚举类型中的任意一个值。常见的枚举值包括：

  - D3D12_LOGIC_OP_CLEAR：将输出颜色设置为 0。
  - D3D12_LOGIC_OP_SET：将输出颜色设置为 1。
  - D3D12_LOGIC_OP_COPY：将输出颜色设置为输入颜色。
  - D3D12_LOGIC_OP_COPY_INVERTED：将输出颜色设置为输入颜色取反（即 1 - 输入颜色）。
  - D3D12_LOGIC_OP_NOOP：不对输出颜色进行任何处理。
  - D3D12_LOGIC_OP_INVERT：将输出颜色取反（即 1 - 输出颜色）。
  - D3D12_LOGIC_OP_AND：对输入颜色和输出颜色进行 AND 运算。
  - D3D12_LOGIC_OP_NAND：对输入颜色和输出颜色进行 NAND 运算。
  - D3D12_LOGIC_OP_OR：对输入颜色和输出颜色进行 OR 运算。
  - D3D12_LOGIC_OP_NOR：对输入颜色和输出颜色进行 NOR 运算。
  - D3D12_LOGIC_OP_XOR：对输入颜色和输出颜色进行 XOR 运算。
  - D3D12_LOGIC_OP_EQUIV：对输入颜色和输出颜色进行等价运算（即相当于 NOT(XOR)）。
  - D3D12_LOGIC_OP_AND_REVERSE：对输入颜色和输出颜色进行反向 AND 运算。
  - D3D12_LOGIC_OP_AND_INVERTED：对输入颜色和输出颜色进行反向 AND 运算。
  - D3D12_LOGIC_OP_OR_REVERSE：对输入颜色和输出颜色进行反向 OR 运算。
  - D3D12_LOGIC_OP_OR_INVERTED：对输入颜色和输出颜色进行反向 OR 运算。

  需要注意的是，逻辑运算通常只适用于使用非线性颜色空间（例如 gamma 空间）渲染的图像。在线性颜色空间下，逻辑运算可能会产生不可预期的结果或者无法达到期望的效果。另外，由于逻辑运算通常要进行额外的计算，所以会影响渲染性能，应该控制使用频率和范围。

- RenderTargetWriteMask：表示需要写入当前渲染目标的哪些颜色通道。可以是 D3D12_COLOR_WRITE_ENABLE 枚举类型中的任意一个值的组合。常见的枚举值包括：

  - D3D12_COLOR_WRITE_ENABLE_RED：允许写入红色通道。
  - D3D12_COLOR_WRITE_ENABLE_GREEN：允许写入绿色通道。
  - D3D12_COLOR_WRITE_ENABLE_BLUE：允许写入蓝色通道。
  - D3D12_COLOR_WRITE_ENABLE_ALPHA：允许写入透明度通道。