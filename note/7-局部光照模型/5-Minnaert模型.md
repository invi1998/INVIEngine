# Minnaert模型（月球模型）

Minnaert模型是用于描述光线在具有粗糙表面的介质中传播时发生散射的一种模型。它是由荷兰天文学家Minnaert于1930年提出的，被广泛应用于计算和渲染模拟相机镜头、卫星图像等领域。

该模型假设表面微观结构比较复杂，导致入射光在表面上多次反射、折射等产生多个散射方向，因此可以用一个参数Kd来描述表面的粗糙程度和光强的衰减程度。若定义入射光线与法线之间的夹角为θ，则Minnaert模型的计算公式如下：

$$
L_{out} = \frac{K_d}{\pi} \cos{^n\theta}
$$


其中，n是一个实数值，通常取值在0-10之间；$L_{out}$是输出的光强。

需要注意的是，Minnaert模型只考虑了光线在介质内部的散射情况，而未考虑折射和反射等现象。同时，该模型只适合于描述比较粗糙的表面，对于高光面等光滑表面效果不佳。



shader公式

```glsl
dot(l, n) * dot(n, v)
    
\\ 或者更高级的效果
    
dot(l, n) * pow(dot(l, n) * dot(n, v), r)
```

l：光线， n：顶点法线，v：摄像机方向向量， r：材质粗糙度

dot(l, n) ： 光线和顶点法线的点乘效果，在光线不变的情况下，该值是固定的

dot(n, v)：顶点法线和视角的点乘效果，一般来说，这个就是在不同视角下的效果的变量