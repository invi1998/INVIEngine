# 局部光照模型（Blinn-Phong 反射模型）

局部光照模型是计算机图形学中用于计算物体表面上每个点的颜色和亮度的模型。它基于物理现象模拟，将光线从光源发射到物体表面上，经过反射、折射等过程，最终到达观察者的眼睛。在这个过程中，光线的能量会随着距离和表面材质等因素而发生变化，因此需要考虑这些因素来计算每个表面点的颜色和亮度。

局部光照模型通常由三个部分构成：环境光、漫反射光和镜面反射光。每个部分分别代表了不同的光线反射方式，对应不同的表面材质特性。

- 环境光：指物体表面被周围环境光线所照射的光线。环境光通常是均匀的，并且不依赖于物体表面的法向量。因此，可以使用一个全局常量来表示环境光的强度和颜色，对整个物体进行统一处理。

- 漫反射光：指物体表面粗糙的部分将光线反射到各个方向上的光线。漫反射光通常依赖于物体表面的法向量和光线的方向向量，它们之间的夹角越小，则反射光强度越大。因此，在计算漫反射光时需要考虑光源的位置、物体表面的法向量和材质属性等因素。

- 镜面反射光：指物体表面较为光滑的部分将光线反射到一个明显的反射方向上的光线。镜面反射光通常依赖于光源位置、观察者位置和物体表面法向量等因素，与物体表面材质相关性更大。因此，在计算镜面反射光时需要考虑物体表面的反射特性（如反射系数），以及光源和观察者的位置。

局部光照模型能够在一定程度上模拟真实光照的效果，提高渲染的真实感和逼真度。



## 泛光模型

泛光模型是一种计算机图形学中用于模拟环境光遮蔽效果的模型。它认为在一个场景中，物体表面的亮度不仅取决于直接照射到该点的光线，还受到了其他物体表面反射、折射和散射等因素的影响。

泛光模型通常使用光线追踪算法来计算每个像素点的颜色和亮度。具体而言，可以使用以下步骤进行：

1. 从观察者位置开始向屏幕上的每个像素发射一条光线。

2. 对于每条光线，依次检测它是否与场景中的物体相交。

3. 如果光线与某个物体相交，则需要进一步判断它是否能够照射到当前像素点。这个过程通常包括计算物体表面的法向量、光线入射角、折射率等因素，并根据这些因素判断光线是否被物体表面遮蔽、反射或折射。

4. 如果光线能够照射到当前像素点，则需要计算它对像素的贡献。这个过程通常根据物体表面的材质特性、光源的属性以及泛光模型中的环境光、漫反射光和镜面反射光等因素来决定。

5. 对于所有光线的贡献进行累加，并将结果作为像素的颜色和亮度值输出。

泛光模型能够较好地模拟真实世界中的光照效果，可以提高渲染图像的真实感和逼真度。但由于其计算复杂度较高，通常需要借助硬件加速和优化算法来提高实时性能。

## Lambert漫反射模型

Lambert漫反射模型是一种计算机图形学中常用的表面光照模型，用于描述物体表面的漫反射特性。它基于Lambert定律，认为物体表面所反射的光线与入射光线的夹角越小，则该点的亮度越高。这个模型通常用于建立物体的基础光照模型，以及在真实时间应用程序中进行快速渲染。

具体而言，Lambert漫反射模型可以用以下公式表示：

$I_{diffuse} = k_d * I_p * cos\theta$

其中，$I_{diffuse}$ 表示物体表面的漫反射亮度，$k_d$ 表示材质的漫反射系数，$I_p$ 表示光源的强度和颜色，$\theta$ 表示物体表面法向量和光线方向之间的夹角。当物体表面法向量和光线方向相同（即 $\theta=0$）时，漫反射亮度最大；当二者垂直时（即 $\theta=90^{\circ}$），漫反射亮度为0。

Lambert漫反射模型的优点是简单易懂、计算复杂度低，并且能够较好地模拟物体表面的漫反射特性。但其缺陷是无法准确地模拟不同材质的反射特性，如高光反射等。因此，在实际应用中，需要根据实际情况选择适合的光照模型，以提高渲染效果的真实感和逼真度。



## Phong反射模型

Phong反射模型是计算机图形学中一种经典的表面光照模型，用于描述物体表面的漫反射和镜面反射特性。它是Lambert漫反射模型的扩展，不仅考虑了物体表面的漫反射特性，还加入了物体表面镜面反射的影响。

Phong反射模型通常分为三个部分：环境光、漫反射光和镜面反射光。

- 环境光：指从所有方向上照射到物体表面的光线。环境光不依赖于光源的位置和方向，并且通常是一个全局常量。

- 漫反射光：指物体表面粗糙的部分将光线反射到各个方向上的光线。漫反射光与Lambert漫反射模型类似，依赖于物体表面的法向量、入射光线的方向和光源位置等因素。

- 镜面反射光：指物体表面较为平滑的部分将光线反射到唯一的方向上的光线。镜面反射光依赖于物体表面的法向量、光源位置、观察者位置和入射光线方向等因素。

Phong反射模型可以用以下公式表示：

$I = k_a I_a + k_d I_p \frac{\vec{n}\cdot\vec{l}}{\left\|\vec{n}\right\| \left\|\vec{l}\right\|} + k_s I_p \frac{\vec{r}\cdot\vec{v}}{\left\|\vec{r}\right\| \left\|\vec{v}\right\|}$

其中，$I$ 表示物体表面的亮度，$k_a$、$k_d$ 和 $k_s$ 分别表示环境光、漫反射光和镜面反射光的系数，$I_a$ 表示环境光的强度和颜色，$I_p$ 表示光源的强度和颜色，$\vec{n}$ 表示物体表面法向量，$\vec{l}$ 表示光线方向向量，$\vec{v}$ 表示视线方向向量，$\vec{r}$ 表示反射方向向量。

Phong反射模型能够较好地模拟真实世界中的光照效果，包括漫反射和镜面反射两个方面。但其缺点是计算复杂度较高，需要进行大量的浮点数计算，因此在实时渲染场景时可能会存在性能问题。



## Blinn-Phong反射模型

Blinn-Phong反射模型是计算机图形学中一种基于Phong反射模型的改进版，也被称为半程向量反射模型。它用一个半程向量来代替Phong模型中的反射向量，以提高计算效率和减少镜面高光的大小。

具体而言，Blinn-Phong反射模型使用以下公式来计算物体表面的亮度：

$I = k_a I_a + k_d I_p \frac{\vec{n}\cdot\vec{l}}{\left\|\vec{n}\right\| \left\|\vec{l}\right\|} + k_s I_p \frac{\vec{h}\cdot\vec{n}}{\left\|\vec{h}\right\| \left\|\vec{n}\right\|}$

其中，$I$ 表示物体表面的亮度，$k_a$、$k_d$ 和 $k_s$ 分别表示环境光、漫反射光和镜面反射光的系数，$I_a$ 表示环境光的强度和颜色，$I_p$ 表示光源的强度和颜色，$\vec{n}$ 表示物体表面法向量，$\vec{l}$ 表示光线方向向量，$\vec{h}$ 表示半程向量，其定义为视线方向向量 $\vec{v}$ 和光线方向向量 $\vec{l}$ 的平均值：

$\vec{h} = \frac{\vec{v}+\vec{l}}{\left\|\vec{v}+\vec{l}\right\|}$

与Phong反射模型相比，Blinn-Phong反射模型的优点在于计算效率更高，因为半程向量的计算次数比反射向量的计算次数要少，并且能够减少镜面高光的大小，使得模拟结果更加真实。但需要注意的是，在某些情况下（如平滑物体表面），Blinn-Phong反射模型可能会产生过多的高光，导致渲染结果不自然。