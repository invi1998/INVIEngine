# 四元数公式证明

## 四元数乘积的模等于模的乘积

$$
g_1=[w, \vec{v}]=[w, x_1, y_1, z_1], g_2=[s, \vec{u}]=[s, x_2, y_2, z_2]\\
|g_1g_2| = |g_1||g_2|=\sqrt{|g_1|^2|g_2|^2}\\
= \sqrt{(w^2+x_1^2+y_1^2+z_1^2)(s^2+x_2^2+y_2^2+z_2^2)}\\
然后我们来看|g_1g_2|这部分\\
|g_1g_2| = \sqrt{[w, x_1, y_1, z_1][s, w_2, x_2, y_2,z_2]}\\
=\sqrt{(ws-x_1x_2-y_1y_2-z_1z_2)^2+(wx_2+x_1s+z_1y_2-y_1z_2)^2+(wy_2+y_1s+x_1z_2-z_1x_2)^2+(wz_2+z_1s+y_1x_2-x_1y_2)^2}\\
如果我们将这个式子化简计算，最后得到的结果其实和上面的\sqrt{(w^2+x_1^2+y_1^2+z_1^2)(s^2+x_2^2+y_2^2+z_2^2)}的结果是一样的（过程略）\\
,由此我们证明了 四元数乘积的模等于模的乘积 |g_1g_2| = |g_1||g_2|\\
$$



## 四元数乘积的逆等于各个四元数逆以相反顺序相乘

$$
(ab)^{-1}=b^{-1}a^{-1}
$$

对于更多的四元数的乘积的逆，很容易泛化推导出结果如下：
$$
(g_1g_2g_3...g_{n-1}g_n)^{-1} = g_n^{-1}g_{n-1}^{-1}...g_3^{-1}g_2^{-1}g_1^{-1}
$$


## 四元数和自身共轭四元数相乘得到一个新的实数四元数

$$
g=[w, \vec{v}]\\
g^*=[w, -\vec{v}]\\
gg* = [w, \vec{v}][w, -\vec{v}]\\
= [w^2-\vec{v}\cdot \vec{v}, -w\vec{v}+w\vec{v}+\vec{v}\times -\vec{v}]\\
= [w^2-\vec{v}\cdot \vec{v}, \vec{v}\times -\vec{v}]\\
-\vec{v}和\vec{v}在几何上是180°的关系, 因为向量叉乘 \vec{a}\times\vec{b}=\vec{a}\cdot\vec{b}\sin{\theta},带入v,\theta=180°(\pi),所以叉乘结果为0\\
= [w^2+|\vec{v}|^2, 0]\\
由此可以看到，四元数的虚部变成了0，变成了一个完全的实数。
$$



其实我们一般也不需要记这个结论，只需要知道这个公式$gg* = [w, \vec{v}][w, -\vec{v}] = [w^2+|\vec{v}|^2, 0]$



## 四元数共轭的共轭就是四元数本身

$$
g=[w, \vec{v}]\\
g^*=[w,-\vec{v}]\\
(g^*)^*=g=[w, \vec{v}]
$$

## 两个四元数和的共轭他们共轭的和相等

$$
g_1^*+g_2^*=（g_1+g_2)^*
$$

## 两个四元数乘积的共轭是他们共轭调换顺序后的乘积

$$
(g_1g_2)^* = g_2^*g_1^*
$$

同样，泛化推理到多个四元数，规则如下：
$$
(g_1g_2...g_{n-1}g_n)^* = g_n^*g_{n-1}^*...g_2^*g_1^*
$$

## 一个四元数的模等于其共轭四元数的模

$$
g = [w, \vec{v}]\\
|g| = |g^*|
$$

很容易理解，一个四元数和他的共轭四元数，在向量表现上来说，就只是方向不一样，所以他们的模长其实都是一样的

## 四元数乘积的模等于四元数模的乘积

$$
|g_1g_2| = |g_1||g_2|
$$

## 单位四元数的逆和他的共轭相等

对于一个单位四元数$g$
$$
g^* = g^{-1}
$$


## 四元数和他共轭相乘等于他的模本身（结合前面的公式 四元数和自身共轭四元数相乘得到一个新的实数四元数）

$$
g^*g = gg^* =[w^2+|\vec{v}|^2, 0]\\
=|g|=\sqrt{gg^*}=\sqrt{w^2+x^2+y^2+z^2}\\
$$



## 四元数点乘的几何意义

四元数点乘结果是一个标量

有如下两个四元数
$$
g_1 = [w_1, x_1, y_1, z_1]\\
g_2 = [w_2, x_2, y_2, z_2]\\
\\ 
g_1 \cdot g_2 = w_1w_2 + x_1x_2 + y_1y_2 + z_1z_2
$$


这里我们先回顾一下向量的点乘，可以知道两个向量点乘结果，描述的就是这两个向量的角度差
$$
\vec{a}\cdot\vec{b} = |\vec{a}||\vec{b}|\cos{\theta}\\
\cos{\theta} = \frac{\vec{a}\cdot\vec{b}}{|\vec{a}||\vec{b}|} = \frac{x_1x_2+y_1y_2}{|a||b|}
$$
对于四元数，也是同理，其几何意义描述的也是两个四元数的角度差信息
$$
\cos{\theta} = \frac{w_1w_2+x_1x_2+y_1y_2+z_1z_2}{|g_1||g_2|}
$$
如果这两个向量是两个单位四元数，那模就是1，式子可以简化为
$$
\cos{\theta} = w_1w_2+x_1x_2+y_1y_2+z_1z_2
$$






